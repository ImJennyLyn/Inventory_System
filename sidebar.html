<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

<button id="toggleSidebarBtn" style="position: fixed; top: 10px; left: 10px; z-index: 999;">☰</button>

<div class="sidebar expanded" id="sidebar">
  <h2 class="sidebar-title">Inventory System</h2>
  <a href="dashboard.php" onclick="setActive(this)"><i class="fas fa-tachometer-alt"></i>Dashboard</a>
  <a href="inventory.php" onclick="setActive(this)"><i class="fas fa-boxes"></i>Inventory</a>
  <a href="stock.php" onclick="setActive(this)"><i class="fas fa-exchange-alt"></i>Stock In/Out</a>
  <a href="reports.php" onclick="setActive(this)"><i class="fas fa-chart-line"></i>Reports</a>
  <a href="users.php" onclick="setActive(this)"><i class="fas fa-users"></i>Users</a>
  <a href="logs.php" onclick="setActive(this)"><i class="fas fa-history"></i>Activity Logs</a>
</div>

<style>
  .sidebar {
    width: 250px;
    transition: width 0.3s ease;
    overflow: hidden;
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    background-color: rgb(2, 17, 28);
    padding-top: 20px;
    color: black;
    z-index: 998;
  }

  .sidebar.collapsed {
    width: 60px;
  }

  .sidebar-title {
    padding: 0 20px 20px;
    font-size: 18px;
  }

  .sidebar.collapsed .sidebar-title,
  .sidebar.collapsed .link-text {
    display: none;
  }

  .sidebar a {
    display: flex;
    align-items: center;
    color: rgb(148, 148, 150);
    padding: 12px 20px;
    text-decoration: none;
    margin: 5px 10px;
    border-radius: 5px;
    transition: background-color 0.2s ease;
  }

  .sidebar a i {
    margin-right: 10px;
    min-width: 20px;
    text-align: center;
  }

  .sidebar a:hover {
    background-color: #3db6a8;
    color: white;
  }

  .sidebar a.active {
    background-color: #186642;
    color: white;
    border-left: 5px solid #27ae60;
  }

  #toggleSidebarBtn {
    background-color: #6c7883;
    color: white;
    border: none;
    padding: 10px;
    cursor: pointer;
    font-size: 18px;
  }

  #toggleSidebarBtn:hover {
    background-color: #34495e;
  }
</style>

<script>  document.addEventListener('DOMContentLoaded', () => {
    const toggleBtn = document.getElementById('toggleSidebarBtn');
    const sidebar = document.getElementById('sidebar');

    // Toggle Sidebar
    toggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('collapsed');
      toggleBtn.innerHTML = sidebar.classList.contains('collapsed') ? '☰' : '×';
    });

  // Get current file name
  const currentPage = window.location.pathname.split('/').pop();
  console.log("Current Page:", currentPage); // Debugging

  // Loop through all links to check the active state
  sidebar.querySelectorAll('a').forEach(link => {
    const linkPage = link.getAttribute('href').split('/').pop();
    console.log("Comparing:", linkPage, "vs", currentPage); // Debugging
    if (linkPage === currentPage) {
      link.classList.add('active');
    }
  });
});

// Function to manually set active class on click
function setActive(clickedLink) {
  // Remove active class from all links
  document.querySelectorAll('.sidebar a').forEach(link => {
    link.classList.remove('active');
  });
  // Add active class to the clicked link
  clickedLink.classList.add('active');
}
</script>
