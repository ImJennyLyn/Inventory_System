<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

<!-- Toggle Button -->
<button id="toggleSidebarBtn" style="position: fixed; top: 10px; left: 10px; z-index: 999;">☰</button>

<div class="sidebar expanded" id="sidebar">
  <h2 class="sidebar-title">Inventory System</h2>
  <a href="dashboard.php" id="dashboardLink"><i class="fas fa-tachometer-alt"></i><span class="link-text">Dashboard</span></a>
  <a href="inventory.php" id="inventoryLink"><i class="fas fa-boxes"></i><span class="link-text">Inventory</span></a>
  <a href="stock.php" id="stockLink"><i class="fas fa-exchange-alt"></i><span class="link-text">Stock In/Out</span></a>
  <a href="reports.php" id="reportsLink"><i class="fas fa-chart-line"></i><span class="link-text">Reports</span></a>
  <a href="users.php" id="usersLink"><i class="fas fa-users"></i><span class="link-text">Users</span></a>
  <a href="logs.php" id="logsLink"><i class="fas fa-history"></i><span class="link-text">Activity Logs</span></a>
</div>

<style>
  .sidebar {
    width: 250px;
    transition: width 0.3s ease;
    overflow: hidden;
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    background-color: white;
    padding-top: 20px;
    color: black;
    z-index: 998;
  }

  .sidebar.collapsed {
    width: 60px;
  }

  .sidebar a {
    display: flex;
    align-items: center;
    color: black;
    padding: 10px 20px;
    text-decoration: none;
    margin: 10px 0;
    white-space: nowrap;
  }

  .sidebar a:hover {
    background-color: #2ecc71;
    color: white;
  }

  .sidebar a.active {
    background-color: #2ecc71 !important;
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
    border-left: 5px solid #27ae60; /* Adds a left border to the active link */
  }

  .sidebar a i {
    margin-right: 10px;
    min-width: 20px;
    text-align: center;
  }

  .sidebar.collapsed .link-text {
    display: none;
  }

  .sidebar-title {
    padding: 0 20px 20px;
    font-size: 18px;
  }

  .sidebar.collapsed .sidebar-title {
    display: none;
  }

  #toggleSidebarBtn {
    background-color: #2c3e50;
    color: white;
    border: none;
    padding: 10px;
    cursor: pointer;
    font-size: 18px;
  }

  #toggleSidebarBtn:hover {
    background-color: #34495e;
  }
</style>

<script>
  const toggleBtn = document.getElementById('toggleSidebarBtn');
  const sidebar = document.getElementById('sidebar');

  toggleBtn.addEventListener('click', () => {
    sidebar.classList.toggle('collapsed');
    toggleBtn.innerHTML = sidebar.classList.contains('collapsed') ? '☰' : '×';
  });

  // Highlight clicked link manually
  const links = sidebar.querySelectorAll('a');

  links.forEach(link => {
    link.addEventListener('click', () => {
      links.forEach(l => l.classList.remove('active')); // remove from all
      link.classList.add('active');                     // add to clicked
      localStorage.setItem('activeSidebarLink', link.id); // store clicked id
    });
  });

  // Restore last active link on reload
  window.addEventListener('DOMContentLoaded', () => {
    const savedId = localStorage.getItem('activeSidebarLink');
    if (savedId) {
      const savedLink = document.getElementById(savedId);
      if (savedLink) savedLink.classList.add('active');
    }
  });
</script>
